<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js"></script>
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hapticdata/toxiclibsjs@0.3.2/build/toxiclibs.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    <style>
      #fullScreenButton {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1001;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: black;
        border: none;
        cursor: pointer;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <main>
    </main>
    <button id="fullScreenButton" title="Enter Fullscreen"></button>
    <script>
      // Ensure all scripts are loaded before starting the sketch
      function loadScript(url, callback) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        script.onload = callback;
        document.head.appendChild(script);
      }

      loadScript('particle.js', function() {
        loadScript('spring.js', function() {
          loadScript('sketch.js', function() {
            // All scripts are now loaded, set up fullscreen functionality
            document.getElementById('fullScreenButton').addEventListener('click', () => {
              let fs = document.documentElement;
              if (fs.requestFullscreen) {
                fs.requestFullscreen();
              } else if (fs.webkitRequestFullscreen) { /* Safari */
                fs.webkitRequestFullscreen();
              } else if (fs.msRequestFullscreen) { /* IE11 */
                fs.msRequestFullscreen();
              }
            });

            document.addEventListener('fullscreenchange', () => {
              if (document.fullscreenElement) {
                document.getElementById('fullScreenButton').style.display = 'none';
              } else {
                document.getElementById('fullScreenButton').style.display = 'block';
              }
            });

            // Start the p5.js sketch
            new p5();
          });
        });
      });
    </script>
  </body>
</html>